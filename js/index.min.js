var OPTIONS={
	effect:500
};
$(function(){
	var $selector=$("#selector");
	$("#menu div.content span.list em").click(
		function(){$selector.fadeIn(OPTIONS.effect)});
	$("#selector div.dialog div.title em").click(function(){
		$selector.fadeOut(OPTIONS.effect)});
	var $checked=$("#selector div.dialog div.content ul.items li input");
	$checked.change(function(){
		var $cks=$checked.filter(":checked");
		if($cks.size()==7){this.checked=false;alert("最多选择6项");
		return
	}
		if(this.checked){$(this).parent().parent().addClass("selected")}
			else{$(this).parent().parent().removeClass("selected")}genSelected($cks)});
	var $uls=$("#menu div.content span.list ul");

    $("#selector div.dialog div.content button.save").click(function(){
    	var $ckds = $checked.filter(":checked");
    	$uls.empty();
    	$ckds.each(function(){
    		var $this = $(this);
    		$uls.append($('<li><i style="background-image:'
				           +$this.prev().css("background-image")
				           +'"></i><a href="#">'
				           +$this.parent().text()
				           +"</a></li>"
    			))
    	});
         $selector.fadeOut(OPTIONS.effect)
    })


	// $("#selector div.dialog div.content button.save").click(function(){
	// 	var $ckds=$checked.filter(":checked");
	// 	$uls.empty();
	// 	$ckds.each(function(){
	// 		var $this=$(this);
	// 		$uls.append($('<li><i style="background-image:'
	// 			           +$this.prev().css("background-image")
	// 			           +'"></i><a href="#">'
	// 			           +$this.parent().text()
	// 			           +"</a></li>"))});
	// 	$selector.fadeOut(OPTIONS.effect)})
});
        function genSelected($chks){
        	$("#selector div.dialog div.content div.text span").text($chks.size()+"/6");
        var $ul=$("#selector div.dialog div.content div.selected ul").empty();
        $chks.each(function(){
        	$ul.append($('<li><input type="checkbox" checked/>'+$(this).parent().text()+"</li>"))})};